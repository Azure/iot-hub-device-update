<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Device Update for IotHub: src/adu_workflow/src/agent_workflow.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Device Update for IotHub
   &#160;<span id="projectnumber">1.0.1</span>
   </div>
   <div id="projectbrief">Device Update for IoTHub delivers client update from the Device Update for IotHub service.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2af8c8a5a5c91338718cea5984f016c0.html">adu_workflow</a></li><li class="navelem"><a class="el" href="dir_f8fac45691275be30d38ba3bd3a20388.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">agent_workflow.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Handles workflow requests coming in from the hub.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="agent__workflow_8h_source.html">aduc/agent_workflow.h</a>&quot;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="adu__core__export__helpers_8h_source.html">aduc/adu_core_export_helpers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="agent__orchestration_8h_source.html">aduc/agent_orchestration.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config__utils_8h_source.html">aduc/config_utils.h</a>&quot;</code><br />
<code>#include &quot;aduc/download_handler_factory.h&quot;</code><br />
<code>#include &quot;aduc/download_handler_plugin.h&quot;</code><br />
<code>#include &quot;<a class="el" href="logging_8h_source.html">aduc/logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="parser__utils_8h_source.html">aduc/parser_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="result_8h_source.html">aduc/result.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="string__c__utils_8h_source.html">aduc/string_c_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="system__utils_8h_source.html">aduc/system_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="workflow_8h_source.html">aduc/types/workflow.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="workflow__data__utils_8h_source.html">aduc/workflow_data_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="workflow__utils_8h_source.html">aduc/workflow_utils.h</a>&quot;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for agent_workflow.c:</div>
<div class="dyncontent">
<div class="center"><img src="agent__workflow_8c__incl.png" border="0" usemap="#src_2adu__workflow_2src_2agent__workflow_8c" alt=""/></div>
<map name="src_2adu__workflow_2src_2agent__workflow_8c" id="src_2adu__workflow_2src_2agent__workflow_8c">
<area shape="rect" title="Handles workflow requests coming in from the hub." alt="" coords="1695,5,1854,47"/>
<area shape="rect" href="agent__workflow_8h.html" title="Handles workflow requests coming in from the hub." alt="" coords="496,102,667,129"/>
<area shape="rect" href="workflow_8h.html" title="Define types for Device Update agent workflow." alt="" coords="489,184,655,211"/>
<area shape="rect" href="result_8h.html" title="Describes the ADUC result type. Generated from result_codes.json by ErrorCodeDefinitionGenerator...." alt="" coords="256,341,363,367"/>
<area shape="rect" href="logging_8h.html" title="Maps logging macros to the appropriate logging library functions." alt="" coords="1445,423,1563,449"/>
<area shape="rect" title=" " alt="" coords="2041,102,2127,129"/>
<area shape="rect" href="stdlib_8h_source.html" title=" " alt="" coords="2310,423,2381,449"/>
<area shape="rect" href="time_8h_source.html" title=" " alt="" coords="2152,102,2216,129"/>
<area shape="rect" href="adu__core__export__helpers_8h.html" title="Provides set of helpers for creating objects defined in adu_core_exports.h." alt="" coords="1169,95,1335,136"/>
<area shape="rect" href="agent__orchestration_8h.html" title="The header declarations for business logic for agent&#45;driven workflow orchestration processing." alt="" coords="273,102,471,129"/>
<area shape="rect" href="config__utils_8h.html" title="Header file for the Configuration Utility for reading, parsing the ADUC configuration file." alt="" coords="1889,259,2031,285"/>
<area shape="rect" href="download__handler__factory_8h_source.html" title=" " alt="" coords="2264,95,2440,136"/>
<area shape="rect" href="download__handler__plugin_8h_source.html" title=" " alt="" coords="793,95,969,136"/>
<area shape="rect" href="parser__utils_8h.html" title="Utilities for the Device Update Agent extensibility." alt="" coords="1419,259,1565,285"/>
<area shape="rect" href="string__c__utils_8h.html" title="String utilities for C code." alt="" coords="1792,341,1947,367"/>
<area shape="rect" href="system__utils_8h.html" title="System level utilities, e.g. directory management, reboot, etc." alt="" coords="2715,259,2867,285"/>
<area shape="rect" href="workflow__data__utils_8h.html" title="Util functions for working with ADUC_WorkflowData objects." alt="" coords="993,95,1145,136"/>
<area shape="rect" href="workflow__utils_8h.html" title="Util functions for ADUC_Workflow data." alt="" coords="1359,102,1521,129"/>
<area shape="rect" title=" " alt="" coords="2465,102,2549,129"/>
<area shape="rect" title=" " alt="" coords="784,497,867,524"/>
<area shape="rect" title=" " alt="" coords="246,259,317,285"/>
<area shape="rect" href="adu__core_8h.html" title="Describes types used in ADUC agent code." alt="" coords="544,259,712,285"/>
<area shape="rect" href="download_8h.html" title="Defines types related to file download functionality." alt="" coords="387,341,559,367"/>
<area shape="rect" href="update__content_8h.html" title="Defines types related to Update Content data." alt="" coords="989,341,1200,367"/>
<area shape="rect" href="hash_8h.html" title="Defines types related to hashing functionality." alt="" coords="1046,423,1186,449"/>
<area shape="rect" title=" " alt="" coords="1486,341,1565,367"/>
<area shape="rect" title=" " alt="" coords="635,423,706,449"/>
<area shape="rect" href="adu__types_8h.html" title="Defines common types used throughout Device Update agent components." alt="" coords="1325,341,1461,367"/>
<area shape="rect" title=" " alt="" coords="971,497,1045,524"/>
<area shape="rect" href="c__utils_8h.html" title="Helpers and macros for C code." alt="" coords="1715,497,1826,524"/>
<area shape="rect" href="adu__core__exports_8h.html" title="Describes methods to be exported from platform&#45;specific ADUC agent code." alt="" coords="755,184,939,211"/>
<area shape="rect" title=" " alt="" coords="2480,333,2648,375"/>
<area shape="rect" title=" " alt="" coords="1971,333,2139,375"/>
<area shape="rect" title=" " alt="" coords="2163,341,2354,367"/>
<area shape="rect" href="sys__stat_8h_source.html" title=" " alt="" coords="2774,341,2917,367"/>
<area shape="rect" href="unistd_8h_source.html" title=" " alt="" coords="2941,341,3070,367"/>
<area shape="rect" title=" " alt="" coords="2803,423,2888,449"/>
<area shape="rect" title=" " alt="" coords="2953,423,3058,449"/>
<area shape="rect" title=" " alt="" coords="1470,184,1541,211"/>
<area shape="rect" title=" " alt="" coords="1565,184,1661,211"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtagADUC__WorkflowHandlerMapEntry.html">tagADUC_WorkflowHandlerMapEntry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map from a workflow step to a method that performs that step of the workflow, and the UpdateState to transition to if that method is successful.  <a href="structtagADUC__WorkflowHandlerMapEntry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a4b00ca5c4ab10732fd8e950e0c7931ef"><td class="memItemLeft" align="right" valign="top"><a id="a4b00ca5c4ab10732fd8e950e0c7931ef"></a>
typedef <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a4b00ca5c4ab10732fd8e950e0c7931ef">ADUC_Workflow_OperationFunc</a>) (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData)</td></tr>
<tr class="memdesc:a4b00ca5c4ab10732fd8e950e0c7931ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature of method to perform an update action. <br /></td></tr>
<tr class="separator:a4b00ca5c4ab10732fd8e950e0c7931ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52732b96ee7fc03c8aa7979d20f94d66"><td class="memItemLeft" align="right" valign="top"><a id="a52732b96ee7fc03c8aa7979d20f94d66"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a52732b96ee7fc03c8aa7979d20f94d66">ADUC_Workflow_OperationCompleteFunc</a>) (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result)</td></tr>
<tr class="memdesc:a52732b96ee7fc03c8aa7979d20f94d66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature of method called when OperationFunc completes synch, or after it calls completion callback. <br /></td></tr>
<tr class="separator:a52732b96ee7fc03c8aa7979d20f94d66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eb96e34669a76e48da227a7c59592d4"><td class="memItemLeft" align="right" valign="top"><a id="a5eb96e34669a76e48da227a7c59592d4"></a>
typedef struct <a class="el" href="structtagADUC__WorkflowHandlerMapEntry.html">tagADUC_WorkflowHandlerMapEntry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a5eb96e34669a76e48da227a7c59592d4">ADUC_WorkflowHandlerMapEntry</a></td></tr>
<tr class="memdesc:a5eb96e34669a76e48da227a7c59592d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map from a workflow step to a method that performs that step of the workflow, and the UpdateState to transition to if that method is successful. <br /></td></tr>
<tr class="separator:a5eb96e34669a76e48da227a7c59592d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5f736963a7371b0019ba9d2052719867"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a5f736963a7371b0019ba9d2052719867">ADUC_Workflow_WorkCompletionCallback</a> (const void *workCompletionToken, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result, bool isAsync)</td></tr>
<tr class="memdesc:a5f736963a7371b0019ba9d2052719867"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when work is complete.  <a href="agent__workflow_8c.html#a5f736963a7371b0019ba9d2052719867">More...</a><br /></td></tr>
<tr class="separator:a5f736963a7371b0019ba9d2052719867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d1ece5e998bb2099f8e962cb313328"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="agent__workflow_8c.html#a5eb96e34669a76e48da227a7c59592d4">ADUC_WorkflowHandlerMapEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a01d1ece5e998bb2099f8e962cb313328">GetWorkflowHandlerMapEntryForAction</a> (<a class="el" href="update__content_8h.html#a0125d80fae0076df36b059629b314297">ADUCITF_WorkflowStep</a> workflowStep)</td></tr>
<tr class="memdesc:a01d1ece5e998bb2099f8e962cb313328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Workflow Handler Map Entry for a workflow step.  <a href="agent__workflow_8c.html#a01d1ece5e998bb2099f8e962cb313328">More...</a><br /></td></tr>
<tr class="separator:a01d1ece5e998bb2099f8e962cb313328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b986ff3f2bd2fb067f8cde8050594c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#ab5b986ff3f2bd2fb067f8cde8050594c">ADUC_Workflow_DoWork</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData)</td></tr>
<tr class="memdesc:ab5b986ff3f2bd2fb067f8cde8050594c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called regularly to allow for cooperative multitasking during work.  <a href="agent__workflow_8c.html#ab5b986ff3f2bd2fb067f8cde8050594c">More...</a><br /></td></tr>
<tr class="separator:ab5b986ff3f2bd2fb067f8cde8050594c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c5218f320cf533930e632acb133f203"><td class="memItemLeft" align="right" valign="top"><a id="a8c5218f320cf533930e632acb133f203"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADUC_Workflow_HandleStartupWorkflowData</b> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *currentWorkflowData)</td></tr>
<tr class="separator:a8c5218f320cf533930e632acb133f203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae14b4b7b76ad7d4ecffc38050f022cac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#ae14b4b7b76ad7d4ecffc38050f022cac">ADUC_Workflow_HandlePropertyUpdate</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *currentWorkflowData, const unsigned char *propertyUpdateValue, bool forceUpdate)</td></tr>
<tr class="memdesc:ae14b4b7b76ad7d4ecffc38050f022cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles updates to a 1 or more PnP Properties in the ADU Core interface.  <a href="agent__workflow_8c.html#ae14b4b7b76ad7d4ecffc38050f022cac">More...</a><br /></td></tr>
<tr class="separator:ae14b4b7b76ad7d4ecffc38050f022cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26e5a76fdbcd7ad0a517facde3fb1ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#ab26e5a76fdbcd7ad0a517facde3fb1ea">ADUC_Workflow_HandleUpdateAction</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData)</td></tr>
<tr class="memdesc:ab26e5a76fdbcd7ad0a517facde3fb1ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle an incoming update action.  <a href="agent__workflow_8c.html#ab26e5a76fdbcd7ad0a517facde3fb1ea">More...</a><br /></td></tr>
<tr class="separator:ab26e5a76fdbcd7ad0a517facde3fb1ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d13baaa8291702db4ce7ddb73822023"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a6d13baaa8291702db4ce7ddb73822023">ADUC_Workflow_AutoTransitionWorkflow</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData, bool onSuccess)</td></tr>
<tr class="memdesc:a6d13baaa8291702db4ce7ddb73822023"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up the current workflow step in the state transition table and invokes a step transition if the workflow is not complete.  <a href="agent__workflow_8c.html#a6d13baaa8291702db4ce7ddb73822023">More...</a><br /></td></tr>
<tr class="separator:a6d13baaa8291702db4ce7ddb73822023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d34c2f0bc92e380bdd5642a106b429b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a2d34c2f0bc92e380bdd5642a106b429b">ADUC_Workflow_TransitionWorkflow</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData)</td></tr>
<tr class="memdesc:a2d34c2f0bc92e380bdd5642a106b429b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transitions the workflow to the next workflow step, e.g. Download to Install, Install to Apply, etc.  <a href="agent__workflow_8c.html#a2d34c2f0bc92e380bdd5642a106b429b">More...</a><br /></td></tr>
<tr class="separator:a2d34c2f0bc92e380bdd5642a106b429b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f1872e472b73318e912f403cdc7132c"><td class="memItemLeft" align="right" valign="top"><a id="a0f1872e472b73318e912f403cdc7132c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADUC_Workflow_DefaultDownloadProgressCallback</b> (const char *workflowId, const char *fileId, <a class="el" href="download_8h.html#a9b9dc29c43cfe6bc9b044380191f0321">ADUC_DownloadProgressState</a> state, uint64_t bytesTransferred, uint64_t bytesTotal)</td></tr>
<tr class="separator:a0f1872e472b73318e912f403cdc7132c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae806ff33925cd48f18ce449bec98fc9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#ae806ff33925cd48f18ce449bec98fc9a">ADUC_Workflow_SetUpdateState</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData, <a class="el" href="update__content_8h.html#ad79c32abca09f4dac3ad40f42fb8c067">ADUCITF_State</a> updateState)</td></tr>
<tr class="memdesc:ae806ff33925cd48f18ce449bec98fc9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a new update state.  <a href="agent__workflow_8c.html#ae806ff33925cd48f18ce449bec98fc9a">More...</a><br /></td></tr>
<tr class="separator:ae806ff33925cd48f18ce449bec98fc9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5254b911df20cb633dfa20aff1fba8d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a5254b911df20cb633dfa20aff1fba8d8">ADUC_Workflow_SetUpdateStateWithResult</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData, <a class="el" href="update__content_8h.html#ad79c32abca09f4dac3ad40f42fb8c067">ADUCITF_State</a> updateState, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result)</td></tr>
<tr class="memdesc:a5254b911df20cb633dfa20aff1fba8d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a new update state and result.  <a href="agent__workflow_8c.html#a5254b911df20cb633dfa20aff1fba8d8">More...</a><br /></td></tr>
<tr class="separator:a5254b911df20cb633dfa20aff1fba8d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4517438491465a4203b432fd9ffc5f5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a4517438491465a4203b432fd9ffc5f5e">ADUC_Workflow_SetInstalledUpdateIdAndGoToIdle</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData, const char *updateId)</td></tr>
<tr class="memdesc:a4517438491465a4203b432fd9ffc5f5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets installedUpdateId to the given update ID and sets state to Idle.  <a href="agent__workflow_8c.html#a4517438491465a4203b432fd9ffc5f5e">More...</a><br /></td></tr>
<tr class="separator:a4517438491465a4203b432fd9ffc5f5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33de0fdf0729838ec90691791a0b4a6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a33de0fdf0729838ec90691791a0b4a6f">ADUC_Workflow_MethodCall_Idle</a> (<a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData)</td></tr>
<tr class="memdesc:a33de0fdf0729838ec90691791a0b4a6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when entering Idle state.  <a href="agent__workflow_8c.html#a33de0fdf0729838ec90691791a0b4a6f">More...</a><br /></td></tr>
<tr class="separator:a33de0fdf0729838ec90691791a0b4a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f5ddd94651b613dcdfe887b7c9249d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#af9f5ddd94651b613dcdfe887b7c9249d">ADUC_Workflow_MethodCall_ProcessDeployment</a> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData)</td></tr>
<tr class="memdesc:af9f5ddd94651b613dcdfe887b7c9249d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to do ProcessDeployment.  <a href="agent__workflow_8c.html#af9f5ddd94651b613dcdfe887b7c9249d">More...</a><br /></td></tr>
<tr class="separator:af9f5ddd94651b613dcdfe887b7c9249d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d39528c71ecfe343bb826893fc7f7c0"><td class="memItemLeft" align="right" valign="top"><a id="a7d39528c71ecfe343bb826893fc7f7c0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADUC_Workflow_MethodCall_ProcessDeployment_Complete</b> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result)</td></tr>
<tr class="separator:a7d39528c71ecfe343bb826893fc7f7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c206924e2896d9603dde6605e578a21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a9c206924e2896d9603dde6605e578a21">ADUC_Workflow_MethodCall_Download</a> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData)</td></tr>
<tr class="memdesc:a9c206924e2896d9603dde6605e578a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to do download.  <a href="agent__workflow_8c.html#a9c206924e2896d9603dde6605e578a21">More...</a><br /></td></tr>
<tr class="separator:a9c206924e2896d9603dde6605e578a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48990cefd766c9b90949a8c1a1959074"><td class="memItemLeft" align="right" valign="top"><a id="a48990cefd766c9b90949a8c1a1959074"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADUC_Workflow_MethodCall_Download_Complete</b> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result)</td></tr>
<tr class="separator:a48990cefd766c9b90949a8c1a1959074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d79a9dc78617bd4495e26a11a8a4fe6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a6d79a9dc78617bd4495e26a11a8a4fe6">ADUC_Workflow_MethodCall_Install</a> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData)</td></tr>
<tr class="memdesc:a6d79a9dc78617bd4495e26a11a8a4fe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to do install.  <a href="agent__workflow_8c.html#a6d79a9dc78617bd4495e26a11a8a4fe6">More...</a><br /></td></tr>
<tr class="separator:a6d79a9dc78617bd4495e26a11a8a4fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e8418a6cbe616853f3e2d8b909f21d"><td class="memItemLeft" align="right" valign="top"><a id="a93e8418a6cbe616853f3e2d8b909f21d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADUC_Workflow_MethodCall_Install_Complete</b> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result)</td></tr>
<tr class="separator:a93e8418a6cbe616853f3e2d8b909f21d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a297184e3bdc2bff65b900bfc9649c904"><td class="memItemLeft" align="right" valign="top"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a297184e3bdc2bff65b900bfc9649c904">ADUC_Workflow_MethodCall_Backup</a> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData)</td></tr>
<tr class="memdesc:a297184e3bdc2bff65b900bfc9649c904"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to do backup.  <a href="agent__workflow_8c.html#a297184e3bdc2bff65b900bfc9649c904">More...</a><br /></td></tr>
<tr class="separator:a297184e3bdc2bff65b900bfc9649c904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae96a98080b55ac4bd5cba5d2d37cd14e"><td class="memItemLeft" align="right" valign="top"><a id="ae96a98080b55ac4bd5cba5d2d37cd14e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADUC_Workflow_MethodCall_Backup_Complete</b> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result)</td></tr>
<tr class="separator:ae96a98080b55ac4bd5cba5d2d37cd14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3abe990a96613c45bd41245106e8e49"><td class="memItemLeft" align="right" valign="top"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#ad3abe990a96613c45bd41245106e8e49">ADUC_Workflow_MethodCall_Apply</a> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData)</td></tr>
<tr class="memdesc:ad3abe990a96613c45bd41245106e8e49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to do apply.  <a href="agent__workflow_8c.html#ad3abe990a96613c45bd41245106e8e49">More...</a><br /></td></tr>
<tr class="separator:ad3abe990a96613c45bd41245106e8e49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cce6eb854133149f41d3dcd5c2f740d"><td class="memItemLeft" align="right" valign="top"><a id="a2cce6eb854133149f41d3dcd5c2f740d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADUC_Workflow_MethodCall_Apply_Complete</b> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result)</td></tr>
<tr class="separator:a2cce6eb854133149f41d3dcd5c2f740d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ded5da9323f36746bec9321b283f740"><td class="memItemLeft" align="right" valign="top"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a5ded5da9323f36746bec9321b283f740">ADUC_Workflow_MethodCall_Restore</a> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData)</td></tr>
<tr class="memdesc:a5ded5da9323f36746bec9321b283f740"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to do restore.  <a href="agent__workflow_8c.html#a5ded5da9323f36746bec9321b283f740">More...</a><br /></td></tr>
<tr class="separator:a5ded5da9323f36746bec9321b283f740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7981146970e720092eab08c72f033c4c"><td class="memItemLeft" align="right" valign="top"><a id="a7981146970e720092eab08c72f033c4c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADUC_Workflow_MethodCall_Restore_Complete</b> (<a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *methodCallData, <a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> result)</td></tr>
<tr class="separator:a7981146970e720092eab08c72f033c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac30ebd79ce035c346fd0fc527ef89668"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#ac30ebd79ce035c346fd0fc527ef89668">ADUC_Workflow_MethodCall_Cancel</a> (const <a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData)</td></tr>
<tr class="memdesc:ac30ebd79ce035c346fd0fc527ef89668"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to request platform-layer operation to cancel.  <a href="agent__workflow_8c.html#ac30ebd79ce035c346fd0fc527ef89668">More...</a><br /></td></tr>
<tr class="separator:ac30ebd79ce035c346fd0fc527ef89668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a294503aaf77fd41e1469b6bacc6122eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a294503aaf77fd41e1469b6bacc6122eb">ADUC_Workflow_MethodCall_IsInstalled</a> (const <a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *workflowData)</td></tr>
<tr class="memdesc:a294503aaf77fd41e1469b6bacc6122eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to call into the platform layer for IsInstalled.  <a href="agent__workflow_8c.html#a294503aaf77fd41e1469b6bacc6122eb">More...</a><br /></td></tr>
<tr class="separator:a294503aaf77fd41e1469b6bacc6122eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a46fe2c296da160021d3662b60e327cf0"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="agent__workflow_8c.html#a5eb96e34669a76e48da227a7c59592d4">ADUC_WorkflowHandlerMapEntry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="agent__workflow_8c.html#a46fe2c296da160021d3662b60e327cf0">workflowHandlerMap</a> []</td></tr>
<tr class="memdesc:a46fe2c296da160021d3662b60e327cf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Workflow action table.  <a href="agent__workflow_8c.html#a46fe2c296da160021d3662b60e327cf0">More...</a><br /></td></tr>
<tr class="separator:a46fe2c296da160021d3662b60e327cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handles workflow requests coming in from the hub. </p>
<p>The cloud-based orchestrator (CBO) holds the state machine, so the best we can do in this agent is to react to the CBO update actions, and see if we think we're in the correct state. If we are, we'll call an upper-level method to do the work. If not, we'll fail the request.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) Microsoft Corporation. Licensed under the MIT License. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6d13baaa8291702db4ce7ddb73822023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d13baaa8291702db4ce7ddb73822023">&#9670;&nbsp;</a></span>ADUC_Workflow_AutoTransitionWorkflow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_AutoTransitionWorkflow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>onSuccess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks up the current workflow step in the state transition table and invokes a step transition if the workflow is not complete. </p>
<dl class="section remark"><dt>Remarks</dt><dd>This is called by worker thread at the end of work completion processing. It must be in a lock before calling this.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workflowData</td><td>The global context workflow data structure. </td></tr>
    <tr><td class="paramname">onSuccess</td><td>Indicate whether it is a transition on success or on failure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5b986ff3f2bd2fb067f8cde8050594c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5b986ff3f2bd2fb067f8cde8050594c">&#9670;&nbsp;</a></span>ADUC_Workflow_DoWork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_DoWork </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called regularly to allow for cooperative multitasking during work. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workflowData</td><td>Workflow metadata. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae14b4b7b76ad7d4ecffc38050f022cac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae14b4b7b76ad7d4ecffc38050f022cac">&#9670;&nbsp;</a></span>ADUC_Workflow_HandlePropertyUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_HandlePropertyUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>currentWorkflowData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>propertyUpdateValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forceUpdate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles updates to a 1 or more PnP Properties in the ADU Core interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">currentWorkflowData</td><td>The current ADUC_WorkflowData object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">propertyUpdateValue</td><td>The updated property value. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">forceUpdate</td><td>Ensures that specifed <code>propertyUpdateValue</code> will be processed by force deferral if there is ongoing workflow processing. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab26e5a76fdbcd7ad0a517facde3fb1ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab26e5a76fdbcd7ad0a517facde3fb1ea">&#9670;&nbsp;</a></span>ADUC_Workflow_HandleUpdateAction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_HandleUpdateAction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle an incoming update action. </p>
<dl class="section remark"><dt>Remarks</dt><dd>Caller <em>must</em> be in a lock before calling</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workflowData</td><td>Workflow metadata. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad3abe990a96613c45bd41245106e8e49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3abe990a96613c45bd41245106e8e49">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_Apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> ADUC_Workflow_MethodCall_Apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *&#160;</td>
          <td class="paramname"><em>methodCallData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to do apply. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">methodCallData</td><td>- the method call data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result code. </dd></dl>

</div>
</div>
<a id="a297184e3bdc2bff65b900bfc9649c904"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a297184e3bdc2bff65b900bfc9649c904">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_Backup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> ADUC_Workflow_MethodCall_Backup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *&#160;</td>
          <td class="paramname"><em>methodCallData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to do backup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">methodCallData</td><td>- the method call data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result code. </dd></dl>

</div>
</div>
<a id="ac30ebd79ce035c346fd0fc527ef89668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac30ebd79ce035c346fd0fc527ef89668">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_Cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_MethodCall_Cancel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to request platform-layer operation to cancel. </p>
<p>This method should only be called while another MethodCall is currently active.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">methodCallData</td><td>- the method call data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9c206924e2896d9603dde6605e578a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c206924e2896d9603dde6605e578a21">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_Download()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> ADUC_Workflow_MethodCall_Download </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *&#160;</td>
          <td class="paramname"><em>methodCallData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to do download. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">methodCallData</td><td>The metedata for the method call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result code. </dd></dl>

</div>
</div>
<a id="a33de0fdf0729838ec90691791a0b4a6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33de0fdf0729838ec90691791a0b4a6f">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_Idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_MethodCall_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when entering Idle state. </p>
<p>Idle state is the "ready for new workflow state"</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workflowData</td><td>Workflow metadata. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6d79a9dc78617bd4495e26a11a8a4fe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d79a9dc78617bd4495e26a11a8a4fe6">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_Install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> ADUC_Workflow_MethodCall_Install </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *&#160;</td>
          <td class="paramname"><em>methodCallData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to do install. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">methodCallData</td><td>- the method call data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result code. </dd></dl>

</div>
</div>
<a id="a294503aaf77fd41e1469b6bacc6122eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a294503aaf77fd41e1469b6bacc6122eb">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_IsInstalled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> ADUC_Workflow_MethodCall_IsInstalled </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper to call into the platform layer for IsInstalled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">workflowData</td><td>The workflow data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ADUC_Result The result of the IsInstalled call. </dd></dl>

</div>
</div>
<a id="af9f5ddd94651b613dcdfe887b7c9249d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9f5ddd94651b613dcdfe887b7c9249d">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_ProcessDeployment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> ADUC_Workflow_MethodCall_ProcessDeployment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *&#160;</td>
          <td class="paramname"><em>methodCallData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to do ProcessDeployment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">methodCallData</td><td>The metedata for the method call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result code. </dd></dl>

</div>
</div>
<a id="a5ded5da9323f36746bec9321b283f740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ded5da9323f36746bec9321b283f740">&#9670;&nbsp;</a></span>ADUC_Workflow_MethodCall_Restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a> ADUC_Workflow_MethodCall_Restore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="agent__workflow_8h.html#a0867ffb0c07f4f85e101ec0ce0167322">ADUC_MethodCall_Data</a> *&#160;</td>
          <td class="paramname"><em>methodCallData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to do restore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">methodCallData</td><td>- the method call data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result code. </dd></dl>

</div>
</div>
<a id="a4517438491465a4203b432fd9ffc5f5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4517438491465a4203b432fd9ffc5f5e">&#9670;&nbsp;</a></span>ADUC_Workflow_SetInstalledUpdateIdAndGoToIdle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_SetInstalledUpdateIdAndGoToIdle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>updateId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets installedUpdateId to the given update ID and sets state to Idle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">workflowData</td><td>The workflow data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">updateId</td><td>The updateId for the installed content. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae806ff33925cd48f18ce449bec98fc9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae806ff33925cd48f18ce449bec98fc9a">&#9670;&nbsp;</a></span>ADUC_Workflow_SetUpdateState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_SetUpdateState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="update__content_8h.html#ad79c32abca09f4dac3ad40f42fb8c067">ADUCITF_State</a>&#160;</td>
          <td class="paramname"><em>updateState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a new update state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">workflowData</td><td>Workflow data object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">updateState</td><td>New update state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5254b911df20cb633dfa20aff1fba8d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5254b911df20cb633dfa20aff1fba8d8">&#9670;&nbsp;</a></span>ADUC_Workflow_SetUpdateStateWithResult()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_SetUpdateStateWithResult </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="update__content_8h.html#ad79c32abca09f4dac3ad40f42fb8c067">ADUCITF_State</a>&#160;</td>
          <td class="paramname"><em>updateState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a new update state and result. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">workflowData</td><td>Workflow data object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">updateState</td><td>New update state. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">result</td><td>Result to report. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d34c2f0bc92e380bdd5642a106b429b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d34c2f0bc92e380bdd5642a106b429b">&#9670;&nbsp;</a></span>ADUC_Workflow_TransitionWorkflow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_TransitionWorkflow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="workflow_8h.html#a4adec8313f9752570d3fd71558294028">ADUC_WorkflowData</a> *&#160;</td>
          <td class="paramname"><em>workflowData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transitions the workflow to the next workflow step, e.g. Download to Install, Install to Apply, etc. </p>
<dl class="section remark"><dt>Remarks</dt><dd>Must be in a lock</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workflowData</td><td>The global context workflow data structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5f736963a7371b0019ba9d2052719867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f736963a7371b0019ba9d2052719867">&#9670;&nbsp;</a></span>ADUC_Workflow_WorkCompletionCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADUC_Workflow_WorkCompletionCallback </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>workCompletionToken</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="result_8h.html#af1a9740f595ec28855281b88f89ece17">ADUC_Result</a>&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isAsync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when work is complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workCompletionToken</td><td>ADUC_MethodCall_Data pointer. </td></tr>
    <tr><td class="paramname">result</td><td>Result of work. </td></tr>
    <tr><td class="paramname">result</td><td>isAsync true if caller is on worker thread, false if from main thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a01d1ece5e998bb2099f8e962cb313328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01d1ece5e998bb2099f8e962cb313328">&#9670;&nbsp;</a></span>GetWorkflowHandlerMapEntryForAction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="agent__workflow_8c.html#a5eb96e34669a76e48da227a7c59592d4">ADUC_WorkflowHandlerMapEntry</a>* GetWorkflowHandlerMapEntryForAction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="update__content_8h.html#a0125d80fae0076df36b059629b314297">ADUCITF_WorkflowStep</a>&#160;</td>
          <td class="paramname"><em>workflowStep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Workflow Handler Map Entry for a workflow step. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workflowStep</td><td>The workflow step to find. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ADUC_WorkflowHandlerMapEntry* NULL if <code>workflowStep</code> not found. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a46fe2c296da160021d3662b60e327cf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46fe2c296da160021d3662b60e327cf0">&#9670;&nbsp;</a></span>workflowHandlerMap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="agent__workflow_8c.html#a5eb96e34669a76e48da227a7c59592d4">ADUC_WorkflowHandlerMapEntry</a> workflowHandlerMap[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Workflow action table. </p>
<p>Algorithm:</p>
<ul>
<li>Find the Action (e.g. download) in the map.</li>
<li>Call the OperationFunc, passing ADUC_WorkflowData and ADUC_MethodCall_Data objects.</li>
<li>If OperationFunc is complete, i.e. result code NOT AducResultCodeIndicatesInProgress(result.ResultCode) OR IsAducResultCodeFailure(result.ResultCode), then call OperationCompleteFunc.</li>
<li>Otherwise, assume an async operation is in progress. Set OperationInProgress to true. OperationFunc will call back asynchronously via WorkCompletionCallback when work is complete.</li>
<li>OperationFunc and WorkCompletionCallback will both move to the NextState on success.</li>
<li>After transition to the next state, then it will auto-transition to the next step of the workflow specified by NextWorkflowStepAfterNextState, but only if AutoTransitionApplicableUpdateAction is equal to the current update action of the workflow data. </li>
</ul>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
