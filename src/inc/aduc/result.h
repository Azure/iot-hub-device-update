/**
 * @file result.h
 * @brief Describes the ADUC result type.
 *
 * @copyright Copyright (c) Microsoft Corporation.
 * Licensed under the MIT License.
 */
#ifndef ADUC_RESULT_H
#define ADUC_RESULT_H

#include <stdbool.h> // _Bool
#include <stdint.h> // int32_t

/**
 * @brief Defines the type of an ADUC_Result.
 */
typedef int32_t ADUC_Result_t;

/**
 * @brief Defines an ADUC_Result object which is used to indicate status.
 */
typedef struct tagADUC_Result
{
    ADUC_Result_t ResultCode; /**< Method-specific result. Value > 0 indicates success. */
    ADUC_Result_t ExtendedResultCode; /**< Implementation-specific extended result code. */
} ADUC_Result;

/**
 * @brief Return value for general API calls.
 */
typedef enum tagADUC_GeneralResult
{
    ADUC_GeneralResult_Failure = 0, /**< Failed. */
    ADUC_GeneralResult_Success = 1, /**< Succeeded. */
} ADUC_GeneralResult;

/**
 * @brief Determines if a result code is succeeded.
 */
static inline _Bool IsAducResultCodeSuccess(const ADUC_Result_t resultCode)
{
    return (resultCode > 0);
}

/**
 * @brief Determines if a result code is failed.
 */
static inline _Bool IsAducResultCodeFailure(const ADUC_Result_t resultCode)
{
    return (resultCode <= 0);
}

/**
 * Extended Result Code Structure (32 bits)
 *
 * Note: We're discussing a possibility to increase the size to 64 bits.
 *
 *    0 00 00000     Total 4 bytes (32 bits)
 *    - -- -----
 *    | |  |
 *    | |  |
 *    | |  +---------  Error code (20 bits)
 *    | |
 *    | +------------- Component/Area code (8 bits)
 *    |
 *    +--------------- Facility code (4 bits)
 */

/**
 * @brief Facility codes to pass to MAKE_ADUC_EXTENDEDRESULTCODE.
 */
typedef enum tagADUC_Facility
{
    /*indicates errors from unknown sources*/
    ADUC_FACILITY_UNKNOWN = 0x0,

    /*indicates errors from the lower layer*/
    ADUC_FACILITY_LOWERLAYER = 0x1,

    /*indicates errors from the upper layer. */
    ADUC_FACILITY_UPPERLAYER = 0x2,

    /*indicates errors from UPDATE CONTENT HANDLER Extension. */
    ADUC_FACILITY_EXTENSION_UPDATE_CONTENT_HANDLER = 0x3,

    /*indicates errors from CONTENT_DOWNLOADER Extension. */
    ADUC_FACILITY_EXTENSION_CONTENT_DOWNLOADER = 0x4,

    /*indicates errors from COMMUNICATION PROVIDER Extension. */
    ADUC_FACILITY_EXTENSION_COMMUNICATION_PROVIDER = 0x5,

    /*indicates errors from LOG PROVIDER Extension. */
    ADUC_FACILITY_EXTENSION_LOG_PROVIDER = 0x6,

    /*indicates errors from COMPONENT ENUMERATOR Extension. */
    ADUC_FACILITY_EXTENSION_COMPONENT_ENUMERATOR = 0x7,

    /*indicates errors from utility functions. */
    ADUC_FACILITY_UTILITY = 0x8,

    ADUC_FACILITY_UNUSED_9 = 0x9,

    ADUC_FACILITY_UNUSED_A = 0xa,
    ADUC_FACILITY_NSUSED_B = 0xb,
    ADUC_FACILITY_UNUSED_C = 0xc,

    // NOTE: DO retuns HRESULT-like code. To minimize data lost, we assigned it's
    /*indicates errors from Delivery Optimization. */
    ADUC_FACILITY_DELIVERY_OPTIMIZATION = 0xd,

    ADUC_FACILITY_UNUSED_E = 0xe,
    ADUC_FACILITY_UNUSED_F = 0xf,

} ADUC_Facility;

/**
 * @brief Content Handler codes to pass to MAKE_ADUC_CONTENT_HANDLER_EXTENDEDRESULTCODE.
 *
 *    3 00 00000     Total 4 bytes (32 bits)
 *    - -- -----
 *    | |  |
 *    | |  |
 *    | |  +---------  Error code (20 bits)
 *    | |
 *    | +------------- Component (Update Content Handler) code (8 bits)
 *    |                0x00 - 0x1f : RESERVED for DU-Provided content handlers
 *    |                0x20 - 0xff : Available for customers and partners
 *    |
 *    +--------------- Facility code (4 bits)
 */
typedef enum tagADUC_Content_Handler
{
    /*indicates a common error from any handler. */
    ADUC_CONTENT_HANDLER_COMMON = 0x00,

    /*indicates errors from SWUPDATE Update Handler. */
    ADUC_CONTENT_HANDLER_SWUPDATE = 0x01,

    /*indicates errors from APT Update Handler. */
    ADUC_CONTENT_HANDLER_APT = 0x02,

    /*indicates errors from Simulator Update Handler. */
    ADUC_CONTENT_HANDLER_SIMULATOR = 0x03,

    /*indicates errors from instruction steps handler */
    ADUC_CONTENT_HANDLER_STEPS = 0x04,

    /*indicates errors from Script Update Handler. */
    ADUC_CONTENT_HANDLER_SCRIPT = 0x05,

    /*indicates errors from Custom Update handlers. */
    ADUC_CONTENT_HANDLER_EXTERNAL = 0x20,
} ADUC_Content_Handler;

typedef enum tagADUC_Content_Downloader
{
    /*indicates common errors */
    ADUC_CONTENT_DOWNLOADER_COMMON = 0x00,

    /*indicates errors from Delivery Optimization agent. */
    ADUC_CONTENT_DOWNLOADER_DELIVERY_OPTIMIZATION = 0x01,

    /*indicates errors from Simple Http Downloader. */
    ADUC_CONTENT_DOWNLOADER_SIMPLE_HTTP_DOWNLOADER = 0x02,

    /*indicates errors from Curl Downloader. */
    ADUC_CONTENT_DOWNLOADER_CURL_DOWNLOADER = 0x03,

} ADUC_Content_Downloader;

typedef enum tagADUC_Component
{
    /*indicates errors from Crypto-related functions or utilities. */
    ADUC_COMPONENT_CRYPTO = 0x01,

    /*indicates errors from Component Handler Factory. */
    ADUC_COMPONENT_COMPONENT_HANDLER_FACTORY = 0x02,

    /*indicates errors from parsers. */
    ADUC_COMPONENT_UPDATE_DATA_PARSER = 0x03,

    /*indicates errors from Workflow Utilities or Function. */
    ADUC_COMPONENT_WORKFLOW_UTIL = 0x04,
} ADUC_Component;

/**
 * @brief Converts an error to a 32-bit value extended result code.
 * Top 4 bits is facility, next 8 bits is for component or area, therest is value.
 *
 *    0 00 00000     Total 4 bytes (32 bits)
 *    - -- -----
 *    | |  |
 *    | |  |
 *    | |  +---------  Error code (20 bits)
 *    | |
 *    | +------------- Component/Area code (8 bits)
 *    |
 *    +--------------- Facility code (4 bits)
 */
static inline ADUC_Result_t
MAKE_ADUC_EXTENDEDRESULTCODE(const unsigned int facility, const unsigned int component, const unsigned int value)
{
    return ((facility & 0xF) << 0x1C) | ((component & 0xFF) << 0x14) | (value & 0xFFFFF);
}

/**
 * @brief Macros to convert Content Handler results to extended result code values.
 * Extended error codes begin with 0x3#######
 */
static inline ADUC_Result_t
MAKE_ADUC_CONTENT_HANDLER_EXTENDEDRESULTCODE(const unsigned int component, const int32_t value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_EXTENSION_UPDATE_CONTENT_HANDLER, component, value);
}

/**
 * @brief Macros to convert common Handler results to extended result code values.
 * Extended error codes begin with 0x300#####
 */
static inline ADUC_Result_t MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(const int32_t value)
{
    return MAKE_ADUC_CONTENT_HANDLER_EXTENDEDRESULTCODE(ADUC_CONTENT_HANDLER_COMMON, value);
}

/**
 * @brief Macros to convert Simulator Handler results to extended result code values.
 * Extended error codes begin with 0x303#####
 */
static inline ADUC_Result_t MAKE_ADUC_SIMULATOR_HANDLER_EXTENDEDRESULTCODE(const int32_t value)
{
    return MAKE_ADUC_CONTENT_HANDLER_EXTENDEDRESULTCODE(ADUC_CONTENT_HANDLER_SIMULATOR, value);
}

/** * @brief Macros to convert Delivery Optimization results to extended result code values.
 */
static inline ADUC_Result_t MAKE_ADUC_DELIVERY_OPTIMIZATION_EXTENDEDRESULTCODE(const int32_t value)
{
    return ((ADUC_FACILITY_DELIVERY_OPTIMIZATION & 0xF) << 0x1C) | (value & 0xFFFFFFF);
}

/**
 * @brief Macros to convert cryptographic validation results to extended result code values
 */
static inline ADUC_Result_t MAKE_ADUC_VALIDATION_EXTENDEDRESULTCODE(const int value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_UNKNOWN, ADUC_COMPONENT_CRYPTO, value);
}

/**
 * @brief Macros to convert results from Lower Layer components to extended result code values
 */
static inline ADUC_Result_t MAKE_ADUC_LOWERLAYER_EXTENDEDRESULTCODE(const int value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_LOWERLAYER, 0 /* non component-specific */, value);
}

/**
 * @brief Macros to convert results from Upper Layer components to extended result code values
 */
static inline ADUC_Result_t MAKE_ADUC_UPPERLAYER_EXTENDEDRESULTCODE(const int value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_UPPERLAYER, 0 /* non component-specific */, value);
}

/**
 * @brief Macros to convert results from helper functions or shared utities.
 */
static inline ADUC_Result_t MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(const int component, const int value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_UTILITY, component, value);
}

/**
 * @brief Macros to convert errno values to extended result code values.
 *        This value should be reported from a share component or utility,
 *        where the calling function should capture and translate into a
 *        more descriptive result code for better diagnosability.
 */
static inline ADUC_Result_t MAKE_ADUC_ERRNO_EXTENDEDRESULTCODE(const int value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_UNKNOWN, 0 /* non component-specific */, value);
}

/**
 * @brief Macros to convert a Content Handler Extension results to extended result code values.\n
 * The facility code for these errors is ADUC_FACILITY_UPDATE_CONTENT_HANDLER.
 *
 * @param value An error value.
 */
static inline ADUC_Result_t
MAKE_ADUC_UPDATE_CONTENT_HANDLER_EXTENDEDRESULTCODE(const ADUC_Content_Handler handler, const int value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_EXTENSION_UPDATE_CONTENT_HANDLER, handler, value);
}

// Note: POSIX 2001 Standard ErrNos
// Errno Values taken from /usr/include/asm-generic/errno-base.h
// and                     /usr/include/asm-generic/errno.h
// "see man 3 errno" manpage for more details.

#define ADUC_ERC_NOTRECOVERABLE MAKE_ADUC_ERRNO_EXTENDEDRESULTCODE(131)
#define ADUC_ERC_NOMEM MAKE_ADUC_ERRNO_EXTENDEDRESULTCODE(12)
#define ADUC_ERC_NOTPERMITTED MAKE_ADUC_ERRNO_EXTENDEDRESULTCODE(1)

#define ADUC_ERC_VALIDATION_FILE_HASH_IS_EMPTY MAKE_ADUC_VALIDATION_EXTENDEDRESULTCODE(1)
#define ADUC_ERC_VALIDATION_FILE_HASH_TYPE_NOT_SUPPORTED MAKE_ADUC_VALIDATION_EXTENDEDRESULTCODE(2)
#define ADUC_ERC_VALIDATION_FILE_HASH_INVALID_HASH MAKE_ADUC_VALIDATION_EXTENDEDRESULTCODE(3)

//
// Reserved extension common error codes (0-300)
//
#define ADUC_ERC_EXTENSION_ERROR_NONE(facility, component) MAKE_ADUC_EXTENDEDRESULTCODE(facility, component, 0)

#define ADUC_ERC_EXTENSION_CREATE_FAILURE_INVALID_ARG(facility, component) \
    MAKE_ADUC_EXTENDEDRESULTCODE(facility, component, 1)

#define ADUC_ERC_EXTENSION_CREATE_FAILURE_UNKNOWN(facility, component) \
    MAKE_ADUC_EXTENDEDRESULTCODE(facility, component, 2)

#define ADUC_ERC_EXTENSION_CREATE_FAILURE_NOT_FOUND(facility, component) \
    MAKE_ADUC_EXTENDEDRESULTCODE(facility, component, 3)

#define ADUC_ERC_EXTENSION_CREATE_FAILURE_VALIDATE(facility, component) \
    MAKE_ADUC_EXTENDEDRESULTCODE(facility, component, 4)

#define ADUC_ERC_EXTENSION_CREATE_FAILURE_LOAD(facility, component) \
    MAKE_ADUC_EXTENDEDRESULTCODE(facility, component, 5)

#define ADUC_ERC_EXTENSION_FAILURE_REQUIRED_FUNCTION_NOTIMPL(facility, component) \
    MAKE_ADUC_EXTENDEDRESULTCODE(facility, component, 6)

#define ADUC_ERC_EXTENSION_CREATE_FAILURE_CREATE(facility, component) \
    MAKE_ADUC_EXTENDEDRESULTCODE(facility, component, 7)

//
// SWUpdate Update Handler errors.
//

/**
 * @brief Macros to convert SWUPDATE Handler results to extended result code values.
 * Extended error codes begin with 0x301#####
 */
static inline ADUC_Result_t MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(const int32_t value)
{
    return MAKE_ADUC_CONTENT_HANDLER_EXTENDEDRESULTCODE(ADUC_CONTENT_HANDLER_SWUPDATE, value);
}

// General errors (0x000 - 0x0FF)
#define ADUC_ERC_SWUPDATE_HANDLER_EMPTY_VERSION MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(1)

#define ADUC_ERC_SWUPDATE_HANDLER_PREPARE_FAILURE_UNKNOWN_UPDATE_VERSION \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(2)

#define ADUC_ERC_SWUPDATE_HANDLER_PREPARE_FAILURE_WRONG_UPDATE_VERSION MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(3)

#define ADUC_ERC_SWUPDATE_HANDLER_PREPARE_FAILURE_WRONG_FILECOUNT MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(4)

#define ADUC_ERC_SWUPDATE_HANDLER_PREPARE_FAILURE_BAD_FILE_ENTITY MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(5)

#define ADUC_ERC_SWUPDATE_HANDLER_CREATE_SANDBOX_FAILURE MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(6)

#define ADUC_ERC_SWUPDATE_HANDLER_MISSING_SCRIPT_FILE_NAME MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(7)

#define ADUC_ERC_SWUPDATE_HANDLER_MISSING_SWU_FILE_NAME MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(8)

#define ADUC_ERC_SWUPDATE_HANDLER_TOO_MANY_COMPONENTS MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(9)

#define ADUC_ERC_SWUPDATE_HANDLER_INVALID_COMPONENTS_DATA MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0xA)

#define ADUC_ERC_SWUPDATE_HANDLER_BAD_SWUPDATE_CONFIG_FILE MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x20)

// Download related errors (0x100 - 0x1FF)
#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_FAILURE_UNKNOW_UPDATE_VERSION \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x101)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_FAILURE_WRONG_UPDATE_VERSION \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x102)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_FAILURE_WRONG_FILECOUNT MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x103)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOADE_BAD_FILE_ENTITY MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x104)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_ERROR_NULL_WORKFLOW MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x105)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_FAILURE_GET_PRIMARY_FILE_ENTITY \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x106)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_FAILURE_GET_SCRIPT_FILE_ENTITY \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x107)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_FAILURE_GET_PAYLOAD_FILE_ENTITY \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x108)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_PAYLOAD_FILE_FAILURE_UNKNOWNEXCEPTION \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x1FE)

#define ADUC_ERC_SWUPDATE_HANDLER_DOWNLOAD_PRIMARY_FILE_FAILURE_UNKNOWNEXCEPTION \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x1FF)

// Install related errors (0x200 - 0x2FF)
#define ADUC_ERC_SWUPDATE_HANDLER_INSTALL_FAILURE_CANNOT_OPEN_WORKFOLDER \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x201)
#define ADUC_ERC_SWUPDATE_HANDLER_INSTALL_FAILURE_IMAGE_FILE_NOT_FOUND \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x202)
#define ADUC_ERC_SWUPDATE_HANDLER_INSTALL_ERROR_NULL_WORKFLOW MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x203)

#define ADUC_ERC_SWUPDATE_HANDLER_INSTALL_FAILURE_BAD_FILE_ENTITY MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x203)

#define ADUC_ERC_SWUPDATE_HANDLER_INSTALL_FAILURE_PARSE_RESULT_FILE \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x205)

#define ADUC_ERC_SWUPDATE_HANDLER_INSTALL_FAILURE_UNKNOWNEXCEPTION MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE(0x2FF)

// Apply related errors (0x300 - 0x3FF)

// Cancel related errors (0x400 - 0x4FF)

// IsInstalled related errors (0x500 - 0x5FF)

// Exit code from child process. (0x30101000 + exitCode)
#define ADUC_ERC_SWUPDATE_HANDLER_CHILD_FAILURE_PROCESS_EXITCODE(exitCode) \
    MAKE_ADUC_SWUPDATE_HANDLER_EXTENDEDRESULTCODE((0x1000 + exitCode))

//
// APT Update Handler errors.
//

/**
 * @brief Macros to convert APT Handler results to extended result code values.
 * Extended error codes begin with 0x302#####
 */
static inline ADUC_Result_t MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(const int32_t value)
{
    return MAKE_ADUC_CONTENT_HANDLER_EXTENDEDRESULTCODE(ADUC_CONTENT_HANDLER_APT, value);
}

// General errors (0x000 - 0x0FF)
#define ADUC_ERC_APT_HANDLER_ERROR_NONE MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(0)

#define ADUC_ERC_APT_HANDLER_INITIALIZATION_FAILURE MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(1)

#define ADUC_ERC_APT_HANDLER_INVALID_PACKAGE_DATA MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(2)

#define ADUC_ERC_APT_HANDLER_PACKAGE_PREPARE_FAILURE_WRONG_VERSION MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(3)

#define ADUC_ERC_APT_HANDLER_PACKAGE_PREPARE_FAILURE_WRONG_FILECOUNT MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(4)

#define ADUC_ERC_APT_HANDLER_GET_FILEENTITY_FAILURE MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(5)

#define ADUC_ERC_APT_HANDLER_INSTALLCRITERIA_PERSIST_FAILURE MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(6)

// Download related errors (0x100 - 0x1FF)
#define ADUC_ERC_APT_HANDLER_PACKAGE_DOWNLOAD_FAILURE MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(0x100)

// Install related errors (0x200 - 0x2FF)
#define ADUC_ERC_APT_HANDLER_PACKAGE_INSTALL_FAILURE MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(0x200)

// Apply related errors (0x300 - 0x3FF)

// Cancel related errors (0x400 - 0x4FF)
#define ADUC_ERC_APT_HANDLER_PACKAGE_CANCEL_FAILURE MAKE_ADUC_APT_HANDLER_EXTENDEDRESULTCODE(0x300)

//
// Steps Handler errors.
//

/**
 * @brief Macros to convert Steps Handler results to extended result code values.
 * Extended error codes begin with 0x304#####
 */
static inline ADUC_Result_t MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(const int32_t value)
{
    return MAKE_ADUC_CONTENT_HANDLER_EXTENDEDRESULTCODE(ADUC_CONTENT_HANDLER_STEPS, value);
}

// General errors.
#define ADUC_ERC_STEPS_HANDLER_GET_FILE_ENTITY_FAILURE MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(1)
#define ADUC_ERC_STEPS_HANDLER_INVALID_CHILD_MANIFEST_FILENAME MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(2)
#define ADUC_ERC_STEPS_HANDLER_CHILD_WORKFLOW_CREATE_FAILED MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(3)
#define ADUC_ERC_STEPS_HANDLER_CHILD_WORKFLOW_INSERT_FAILED MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(4)
#define ADUC_ERC_STEPS_HANDLER_GET_REF_STEP_COMPATIBILITY_FAILED MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(5)
#define ADUC_ERC_STEPS_HANDLER_SET_SELECTED_COMPONENTS_FAILED MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(6)
#define ADUC_ERC_STEPS_HANDLER_GET_STEP_COMPATIBILITY_FAILED MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(7)
#define ADUC_ERC_STEPS_HANDLER_SET_SELECTED_COMPONENTS_FAILURE MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(8)
#define ADUC_ERC_STEPS_HANDLER_NESTED_REFERENCE_STEP_DETECTED MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(9)
#define ADUC_ERC_STEPS_HANDLER_INVALID_COMPONENTS_DATA MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0xA)
#define ADUC_ERC_STEPS_HANDLER_CREATE_SANDBOX_FAILURE MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0xB)

// Download related errors (0x100 - 0x1FF)
#define ADUC_ERC_STEPS_HANDLER_DOWNLOAD_FAILURE_UNKNOWNEXCEPTION MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x100)

#define ADUC_ERC_STEPS_HANDLER_DOWNLOAD_FAILURE_MISSING_CHILD_WORKFLOW \
    MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x101)

#define ADUC_ERC_STEPS_HANDLER_DOWNLOAD_UNKNOWN_EXCEPTION_DOWNLOAD_CONTENT \
    MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x102)

// Install related errors (0x200 - 0x2FF)
#define ADUC_ERC_STEPS_HANDLER_INSTALL_FAILURES_UNKNOWNEXCEPTION MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x200)

#define ADUC_ERC_STEPS_HANDLER_INSTALL_FAILURE_MISSING_CHILD_WORKFLOW MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x201)

#define ADUC_ERC_STEPS_HANDLER_INSTALL_UNKNOWN_EXCEPTION_INSTALL_CHILD_STEP \
    MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x202)

#define ADUC_ERC_STEPS_HANDLER_INSTALL_UNKNOWN_EXCEPTION_APPLY_CHILD_STEP \
    MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x203)

#define ADUC_ERC_STEPS_HANDLER_INSTALL_UNKNOWN_EXCEPTION_BACKUP_CHILD_STEP \
    MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x204)

#define ADUC_ERC_STEPS_HANDLER_INSTALL_UNKNOWN_EXCEPTION_RESTORE_CHILD_STEP \
    MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x205)

// Apply related errors (0x300 - 0x3FF)

// Cancel related errors (0x400 - 0x4FF)

// IsInstalled related errors (0x500 - 0x5FF)
#define ADUC_ERC_STEPS_HANDLER_ISINSTALLED_FAILURE_MISSING_CHILD_WORKFLOW \
    MAKE_ADUC_STEPS_HANDLER_EXTENDEDRESULTCODE(0x501)

//
// Script Handler errors.
// (Begins with 0x305#####)
//

/**
 * @brief Macros to convert Script Handler results to extended result code values.
 * Extended error codes begin with 0x305#####
 */
static inline ADUC_Result_t MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(const int32_t value)
{
    return MAKE_ADUC_CONTENT_HANDLER_EXTENDEDRESULTCODE(ADUC_CONTENT_HANDLER_SCRIPT, value);
}

// General errors. (0x30500000 - 0FF)
#define ADUC_ERC_SCRIPT_HANDLER_ERROR_NONE MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0)

#define ADUC_ERC_SCRIPT_HANDLER_SET_SELECTED_COMPONENTS_FAILURE MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(1)

#define ADUC_ERC_SCRIPT_HANDLER_MISSING_INSTALLED_CRITERIA MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(2)

#define ADUC_ERC_SCRIPT_HANDLER_TOO_MANY_COMPONENTS MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(3)

#define ADUC_ERC_SCRIPT_HANDLER_MISSING_PRIMARY_SCRIPT_FILE MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(4)

#define ADUC_ERC_SCRIPT_HANDLER_MISSING_SCRIPTFILENAME_PROPERTY MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(5)

#define ADUC_ERC_SCRIPT_HANDLER_CREATE_SANDBOX_FAILURE MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(6)

#define ADUC_ERC_SCRIPT_HANDLER_INVALID_COMPONENTS_DATA MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(7)

#define ADUC_ERC_SCRIPT_HANDLER_MISSING_SCRIPT_OPTION MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(8)

// Download errors. (0x30500100 - 1FF)
#define ADUC_ERC_SCRIPT_HANDLER_DOWNLOAD_ERROR_NULL_WORKFLOW MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x101)

#define ADUC_ERC_SCRIPT_HANDLER_DOWNLOAD_FAILURE_INVALID_FILE_COUNT MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x102)

#define ADUC_ERC_SCRIPT_HANDLER_DOWNLOAD_FAILURE_GET_PRIMARY_FILE_ENTITY \
    MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x103)

#define ADUC_ERC_SCRIPT_HANDLER_DOWNLOAD_FAILURE_GET_PAYLOAD_FILE_ENTITY \
    MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x104)

#define ADUC_ERC_SCRIPT_HANDLER_DOWNLOAD_PAYLOAD_FILE_FAILURE_UNKNOWNEXCEPTION \
    MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x1FE)

#define ADUC_ERC_SCRIPT_HANDLER_DOWNLOAD_PRIMARY_FILE_FAILURE_UNKNOWNEXCEPTION \
    MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x1FF)

// Install errors. (0x30500200 - 2FF)
#define ADUC_ERC_SCRIPT_HANDLER_INSTALL_ERROR_NULL_WORKFLOW MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x201)

#define ADUC_ERC_SCRIPT_HANDLER_INSTALL_INSTALLITEM_BAD_DATA MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x202)

#define ADUC_ERC_SCRIPT_HANDLER_INSTALL_INSTALLITEM_NO_UPDATE_TYPE MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x203)

#define ADUC_ERC_SCRIPT_HANDLER_INSTALL_FAILURE_MISSING_PRIMARY_SCRIPT_FILE \
    MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x204)

#define ADUC_ERC_SCRIPT_HANDLER_INSTALL_FAILURE_PARSE_RESULT_FILE MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x205)

#define ADUC_ERC_SCRIPT_HANDLER_INSTALL_FAILURE_UNKNOWNEXCEPTION MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x2FF)

// Apply errors. (0x30500300 - 3FF)
#define ADUC_ERC_SCRIPT_HANDLER_APPLY_FAILURE_UNKNOWNEXCEPTION MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE(0x3FF)

// IsInstalled errors. (0x30500400 - 4FF)

// Exit code from child process. (0x30501000 + exitCode)
#define ADUC_ERC_SCRIPT_HANDLER_CHILD_PROCESS_FAILURE_EXITCODE(exitCode) \
    MAKE_ADUC_SCRIPT_HANDLER_EXTENDEDRESULTCODE((0x1000 + exitCode))

/**
 * @brief Macros to convert a Downloader Extension results to extended result code values.\n
 * The facility code for these errors is ADUC_FACILITY_EXTENSION_CONTENT_DOWNLOADER.
 *
 * Error code starts at: 0x400#####
 *
 * @param value An error value.
 */
static inline ADUC_Result_t
MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(const ADUC_Content_Downloader downloader, const int value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_EXTENSION_CONTENT_DOWNLOADER, downloader, value);
}

//
// Content Downloader errors.
//

// Common errors.

#define ADUC_ERC_CONTENT_DOWNLOADER_CREATE_FAILURE_NO_SYMBOL \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 1)

#define ADUC_ERC_CONTENT_DOWNLOADER_INITIALIZEPROC_NOTIMP \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 2)

#define ADUC_ERC_CONTENT_DOWNLOADER_DOWNLOADPROC_NOTIMP \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 3)

#define ADUC_ERC_CONTENT_DOWNLOADER_INITIALIZE_EXCEPTION \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 4)

#define ADUC_ERC_CONTENT_DOWNLOADER_DOWNLOAD_EXCEPTION \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 5)

#define ADUC_ERC_CONTENT_DOWNLOADER_INVALID_FILE_ENTITY \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 6)

#define ADUC_ERC_CONTENT_DOWNLOADER_INVALID_DOWNLOAD_URI \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 7)

#define ADUC_ERC_CONTENT_DOWNLOADER_FILE_HASH_TYPE_NOT_SUPPORTED \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 8)

#define ADUC_ERC_CONTENT_DOWNLOADER_BAD_CHILD_MANIFEST_FILE_PATH \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 9)

#define ADUC_ERC_CONTENT_DOWNLOADER_CANNOT_DELETE_EXISTING_FILE \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 10)

#define ADUC_ERC_CONTENT_DOWNLOADER_INVALID_FILE_ENTITY_NO_HASHES \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_COMMON, 11)

// Curl Downloader.
#define ADUC_ERROR_CURL_DOWNLOADER_INVALID_FILE_HASH \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_CURL_DOWNLOADER, 1)

#define ADUC_ERROR_CURL_DOWNLOADER_EXTERNAL_FAILURE(exitCode) \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_CURL_DOWNLOADER, (1000 + exitCode))

// Delivery Optimization Downloader.
#define ADUC_ERROR_DELIVERY_OPTIMIZATION_DOWNLOADER_NOT_INITIALIZE \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_DELIVERY_OPTIMIZATION, 1)

#define ADUC_ERROR_DELIVERY_OPTIMIZATION_DOWNLOADER_BAD_INIT_DATA \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(ADUC_CONTENT_DOWNLOADER_DELIVERY_OPTIMIZATION, 2)

#define ADUC_ERROR_DELIVERY_OPTIMIZATION_DOWNLOADER_EXTERNAL_FAILURE(exitCode) \
    MAKE_ADUC_UPDATE_CONTENT_DOWNLOADER_EXTENDEDRESULTCODE(                    \
        ADUC_CONTENT_DOWNLOADER_DELIVERY_OPTIMIZATION, (1000 + exitCode))

//
// Component Enumerator errors.
//

/**
 * @brief Macros to convert a Content Handler Extension results to extended result code values.\n
 * The facility code for these errors is ADUC_FACILITY_UPDATE_CONTENT_HANDLER.
 *
 * Error code starts at: 0x7#######
 *
 * @param value An error value.
 */
static inline ADUC_Result_t MAKE_ADUC_COMPONENT_ENUMERATOR_EXTENDEDRESULTCODE(const int value)
{
    return MAKE_ADUC_EXTENDEDRESULTCODE(ADUC_FACILITY_EXTENSION_COMPONENT_ENUMERATOR, 0, value);
}

/* Reserved for internal error codes: 0-200 */

#define ADUC_ERC_COMPONENT_ENUMERATOR_GETALLCOMPONENTS_NOTIMP MAKE_ADUC_COMPONENT_ENUMERATOR_EXTENDEDRESULTCODE(1)

#define ADUC_ERC_COMPONENT_ENUMERATOR_SELECTCOMPONENTS_NOTIMP MAKE_ADUC_COMPONENT_ENUMERATOR_EXTENDEDRESULTCODE(2)

#define ADUC_ERC_COMPONENT_ENUMERATOR_FREECOMPONENTSDATASTRING_NOTIMP \
    MAKE_ADUC_COMPONENT_ENUMERATOR_EXTENDEDRESULTCODE(3)

#define ADUC_ERC_COMPONENT_ENUMERATOR_EXCEPTION_GETALLCOMPONENTS MAKE_ADUC_COMPONENT_ENUMERATOR_EXTENDEDRESULTCODE(4)

#define ADUC_ERC_COMPONENT_ENUMERATOR_EXCEPTION_SELECTCOMPONENTS MAKE_ADUC_COMPONENT_ENUMERATOR_EXTENDEDRESULTCODE(5)

#define ADUC_ERC_COMPONENT_ENUMERATOR_EXCEPTION_FREECOMPONENTSDATASTRING \
    MAKE_ADUC_COMPONENT_ENUMERATOR_EXTENDEDRESULTCODE(6)

//
// Error raised from shared libraries or utilities.
//

//
// 'Update Data Parser'
//
#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_INVALID_ACTION_JSON \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 0)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_MANIFEST_VALIDATION_FAILED \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 1)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_NO_UPDATE_ACTION \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 2)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_NO_UPDATE_ID \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 3)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_NO_UPDATE_TYPE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 4)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_BAD_UPDATE_TYPE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 5)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_NO_INSTALLEDCRITERIA \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 6)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_BAD_FILES_OR_FILEURLS \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 7)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_NO_UPDATE_MANIFEST \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 8)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_BAD_UPDATE_MANIFEST \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 9)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_UNSUPPORTED_UPDATE_MANIFEST_VERSION \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 0xA)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_MISSING_DETACHED_UPDATE_MANIFEST_ENTITY \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 0xB)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_BAD_DETACHED_UPDATE_MANIFEST \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 0xC)

#define ADUC_ERC_UTILITIES_UPDATE_DATA_PARSER_DETACHED_UPDATE_MANIFEST_DOWNLOAD_FAILED \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_UPDATE_DATA_PARSER, 0xD)

//
// Workflow Utility errors.
//
#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_ERROR_BAD_PARAM \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 1)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_ERROR_NO_MEM \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 2)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_INVALID_ACTION_JSON_STRING \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 3)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_INVALID_ACTION_JSON_FILE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 4)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_INVALID_UPDATE_ID \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 5)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_COPY_UPDATE_ACTION_FROM_BASE_FAILURE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 6)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_COPY_UPDATE_MANIFEST_FROM_BASE_FAILURE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 7)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_PARSE_INSTRUCTION_ENTRY_FAILURE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 8)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_PARSE_INSTRUCTION_ENTRY_NO_UPDATE_TYPE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 9)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_COPY_UPDATE_ACTION_SET_UPDATE_TYPE_FAILURE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 0xA)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_INVALID_STEP_INDEX \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 0XB)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_PARSE_STEP_ENTRY_NO_HANDLER_TYPE \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 0xC)

#define ADUC_ERC_UTILITIES_WORKFLOW_UTIL_COPY_UPDATE_ACTION_COPY_HANDLER_PROPERTIES_FAILED \
    MAKE_ADUC_UTILITIES_EXTENDEDRESULTCODE(ADUC_COMPONENT_WORKFLOW_UTIL, 0xD)

//
// DU Agent - Lower Layer errors.
//
#define ADUC_ERC_LOWERLEVEL_INVALID_UPDATE_ACTION MAKE_ADUC_LOWERLAYER_EXTENDEDRESULTCODE(1)

#define ADUC_ERC_LOWERLEVEL_UPDATE_MANIFEST_VALIDATION_INVALID_HASH MAKE_ADUC_LOWERLAYER_EXTENDEDRESULTCODE(2)

#define ADUC_ERC_LOWERLEVEL_GET_FILE_ENTITY_FAILURE MAKE_ADUC_LOWERLAYER_EXTENDEDRESULTCODE(3)

#define ADUC_ERC_LOWERLEVEL_SANDBOX_CREATE_FAILURE_NO_ADU_USER MAKE_ADUC_LOWERLAYER_EXTENDEDRESULTCODE(5)

#define ADUC_ERC_LOWERLEVEL_SANDBOX_CREATE_FAILURE_NO_ADU_GROUP MAKE_ADUC_LOWERLAYER_EXTENDEDRESULTCODE(6)

#define ADUC_ERC_LOWERLEVEL_WORKFLOW_INIT_ERROR_NULL_PARAM MAKE_ADUC_LOWERLAYER_EXTENDEDRESULTCODE(20)

//
// DU Agent - Upper Layer errors.
//

/* 1 - 100 - Workflow related failures */
#define ADUC_ERC_UPPERLEVEL_WORKFLOW_UPDATE_ACTION_UNEXPECTED_STATE MAKE_ADUC_UPPERLAYER_EXTENDEDRESULTCODE(1)

#define ADUC_ERC_UPPERLEVEL_WORKFLOW_INSTALL_ACTION_IN_UNEXPECTED_STATE MAKE_ADUC_UPPERLAYER_EXTENDEDRESULTCODE(2)

#define ADUC_ERC_UPPERLEVEL_WORKFLOW_FAILED_RESTORE_FAILED MAKE_ADUC_UPPERLAYER_EXTENDEDRESULTCODE(3)

/* 1 - 100 - Create failures */
#define ADUC_ERC_UPDATE_CONTENT_HANDLER_CREATE_FAILURE_INVALID_ARG MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(1)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_CREATE_FAILURE_UNKNOWN MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(2)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_CREATE_FAILURE_NOT_FOUND MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(3)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_CREATE_FAILURE_VALIDATE MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(4)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_CREATE_FAILURE_LOAD MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(5)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_CREATE_FAILURE_NO_SYMBOL MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(6)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_CREATE_FAILURE_CREATE MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(7)

/* 101 - 200 - Initialize failures */
#define ADUC_ERC_UPDATE_CONTENT_HANDLER_PREPARE_FAILURE_WRONG_VERSION MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(101)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_PARSE_BAD_FORMAT MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(104)

/* 201 - 300 - Download failures */
#define ADUC_ERC_UPDATE_CONTENT_HANDLER_DOWNLOAD_FAILURE_BADFILECOUNT MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(201)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_DOWNLOAD_FAILURE_UNKNOWNEXCEPTION \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(202)

/* 301 - 400 - Install failures */
#define ADUC_ERC_UPDATE_CONTENT_HANDLER_INSTALL_FAILURE_NULL_WORKFLOW MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(301)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_INSTALL_FAILURE_MISSING_PRIMARY_FILE \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(302)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_INSTALL_FAILURE_MISSING_PRIMARY_COMPONENT \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(303)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_INSTALL_FAILURE_UNKNOWNEXCEPTION \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(304)

/* 401 - 500 - Apply failures */

/* 501 - 600 - IsInstalled failures */
#define ADUC_ERC_UPDATE_CONTENT_HANDLER_ISINSTALLED_FAILURE_BAD_UPDATETYPE \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(501)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_ISINSTALLED_FAILURE_COMPONENT_UNAVAILABLE \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(502)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_ISINSTALLED_FAILURE_NULL_WORKFLOW \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(503)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_ISINSTALLED_FAILURE_ACCESS_DATA \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(503)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_ISINSTALLED_FAILURE_NULL_WORKFLOW_HANDLE \
    MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(504)

#define ADUC_ERC_UPDATE_CONTENT_HANDLER_ISINSTALLED_FAILURE_NO_STEPS MAKE_ADUC_COMMON_HANDLER_EXTENDEDRESULTCODE(505)

#endif // ADUC_RESULT_H
